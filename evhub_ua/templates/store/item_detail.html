{% extends 'main/main.html' %}


{% block title %}
Сторінка товару
{% endblock %}

{% block content %}
<br>
<div class="mx-1 p-2 text-center">
    <h6 class="card-title display-6">{{item.title}}</h6>
</div>
<br>
<div class="row mx-1 gx-3 d-flex justify-content-center">

<!--    photo gallery if user is pc version-->
    {% if not user_agent.is_mobile %}
    <div class="col-1">
        <div class="card example-1 border-0 rounded-0 overflow-auto" style="max-height: 500px;">
            {% for image in chargersitems_images|get_item:item.slug|slice:"1:" %}
            <div class="thumbnail border-0" data-bs-target="#carouselExampleFade" data-bs-slide-to="{{ forloop.counter }}">
                <img src="{{ image }}" alt="Thumbnail" class="img-fluid">
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <div class="col-xxl-4 col-lg-6 col-md-10 col-sm-12">
       <div class="card border-0">
           <div id="carouselExampleFade" class="carousel carousel-dark slide carousel-fade mx-1">
              <div class="carousel-inner">
                  <div class="carousel-item active">
                      {% if chargersitems_images|get_item:item.slug %}
                          {% for image in chargersitems_images|get_item:item.slug|slice:":1" %}
                          <img src="{{ image }}" class="d-block w-100" alt="...">
                          <div class="position-absolute top-0 end-0 p-2 opacity-50">
                              <a href="{{ image }}" class="link-secondary">
                                  <button class="btn btn-lg">
                                      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-zoom-in" viewBox="0 0 16 16">
                                          <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0"/>
                                          <path d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"/>
                                          <path fill-rule="evenodd" d="M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5"/>
                                      </svg>
                                  </button>
                              </a>
                          </div>
                          {% endfor %}
                      </div>
                      {% for image in chargersitems_images|get_item:item.slug|slice:"1:" %}
                      <div class="carousel-item">
                          <img src="{{ image }}" class="d-block w-100" alt="...">
                          <div class="position-absolute top-0 end-0 p-2 opacity-50">
                              <a href="{{ image }}" class="link-secondary">
                                  <button class="btn btn-lg">
                                      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-zoom-in" viewBox="0 0 16 16">
                                          <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0"/>
                                          <path d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"/>
                                          <path fill-rule="evenodd" d="M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5"/>
                                      </svg>
                                  </button>
                              </a>
                          </div>
                      </div>
                      {% endfor %}
                  {% endif %}
                  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Previous</span>
                  </button>
                  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Next</span>
                  </button>
              </div>

<!--           photo gallery mob version-->
               {% if user_agent.is_mobile %}
               <div class="row">
                   <div class="card border-0">
                       <div class="card-body d-flex flex-row overflow-auto flex-nowrap">
                           {% for image in chargersitems_images|get_item:item.slug|slice:"1:" %}
                           <div class="col-3 col-lg-2 thumbnails">
                               <div class="thumbnail" data-bs-target="#carouselExampleFade" data-bs-slide-to="{{ forloop.counter }}">
                                   <img src="{{ image }}" alt="Thumbnail" class="img-fluid">
                               </div>
                           </div>
                           {% endfor %}
                       </div>
                   </div>
               </div>
               {% endif %}

           </div>
       </div>
    </div>
    <div class="col-lg-4 col-sm-12">
        <div class="card border-0">
            <div class="card-body bg-light">
                <p>{{item.small_description}}</p>
            </div>
            <div class="card-body mt-2">
                <div class="row">
                    <div class="col-5 d-flex align-items-center">
                        <p class="fs-4 fw-semibold">{{item.price}} ₴</p>
                    </div>
                    <div class="col-7 d-flex justify-content-end">
                        <p class="mt-2 fw-light fs-3 pb-2">
                            В наявності
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="green" class="bi bi-check-circle" viewBox="0 0 16 16">
                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                                <path d="M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05"/>
                            </svg>
                        </p>
                    </div>
                </div>
                <div class="row custom">
                    <div class="col-8 col-lg-8">
                        <form class="cart-from"
                            hx-post="{% url 'add_to_cart' item.slug %}"
                            hx-trigger="click"
                            hx-target="#header_menu_cart_button"
                            hx-swap="outerHTML">
                            {% csrf_token %}
<!--                            hx-target ламає гет запит-->
                            <button type="button" class="btn btn-warning rounded-0 opacity-75 btn-lg">
                                Доати до кошика
                            </button>
                        </form>
                    </div>
                    {% if item_exist_favorites %}
                    <div class="col-2 col-lg-2 d-flex justify-content-end">
                        <div data-toggle="tooltip" data-placement="top" title="переглянути">
                            <a href="{% url 'favorites' %}" type="sumbit" class="btn btn-white rounded-0 opacity-75 btn-lg" id="favorite_active">
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="orange" class="bi bi-heart-fill" viewBox="0 0 16 16">
                                  <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314"/>
                                </svg>
                            </a>
                        </div>
                    </div>
                    {% else %}
                    <div class="col-2 col-lg-2 d-flex justify-content-end">
                        <form
                            hx-post="{% url 'add_to_favorites' %}"
                            hx-trigger="click"
                            hx-swap="none">

                            {% csrf_token %}
                            <input type="hidden" name="slug" value="{{item.slug}}">
                            <button type="submit" class="btn btn-white rounded-0 opacity-75 btn-lg" hx-get="{% url 'active_buttons' %}?q=favorites" hx-trigger="click" hx-swap="outerHTML transition:true">
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
                                    <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15"/>
                                </svg>
                            </button>
                        </form>
                    </div>
                    {% endif %}
                    {% if item_exist_comparison %}
                        <div class="col-2 col-lg-2 d-flex justify-content-end">
                        <div data-toggle="tooltip" data-placement="top" title="переглянути">
                            <a href="{% url 'comparison' %}" type="submit" class="btn btn-white rounded-0 opacity-75 btn-lg" id="comparison_active">
                                <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="orange" class="bi bi-layers-half mb-1" viewBox="0 0 16 16">
                                    <path d="M8.235 1.559a.5.5 0 0 0-.47 0l-7.5 4a.5.5 0 0 0 0 .882L3.188 8 .264 9.559a.5.5 0 0 0 0 .882l7.5 4a.5.5 0 0 0 .47 0l7.5-4a.5.5 0 0 0 0-.882L12.813 8l2.922-1.559a.5.5 0 0 0 0-.882zM8 9.433 1.562 6 8 2.567 14.438 6z"/>
                                </svg>
                            </a>
                        </div>
                    </div>
                    {% else %}
                    <div class="col-2 col-lg-2 d-flex justify-content-end">
                        <form
                            hx-post="{% url 'add_to_comparison' %}"
                            hx-trigger="click"
                            hx-swap="none">

                            {% csrf_token %}
                            <input type="hidden" name="slug" value="{{item.slug}}">
                            {% if user_agent.is_mobile %}
                            <input type="hidden" name="user_agent" value="True">
                            {% else %}
                            <input type="hidden" name="user_agent" value="False">
                            {% endif %}
                            <button type="submit" class="btn btn-white rounded-0 opacity-75 btn-lg" hx-get="{% url 'active_buttons' %}?q=comparison" hx-trigger="click" hx-swap="outerHTML transition:true">
                                <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-layers mb-1" viewBox="0 0 16 16">
                                    <path d="M8.235 1.559a.5.5 0 0 0-.47 0l-7.5 4a.5.5 0 0 0 0 .882L3.188 8 .264 9.559a.5.5 0 0 0 0 .882l7.5 4a.5.5 0 0 0 .47 0l7.5-4a.5.5 0 0 0 0-.882L12.813 8l2.922-1.559a.5.5 0 0 0 0-.882zm3.515 7.008L14.438 10 8 13.433 1.562 10 4.25 8.567l3.515 1.874a.5.5 0 0 0 .47 0zM8 9.433 1.562 6 8 2.567 14.438 6z"/>
                                </svg>
                            </button>
                        </form>
                    </div>
                    {% endif %}
                    <div class="col-12 col-lg-12 d-flex justify-content-center mt-2">
                        <button type="button" class="btn btn-outline-dark border-top-0 border-start-0 border-end-0 rounded-0 opacity-75 btn-lg">
                            Купити товар в один клік
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}